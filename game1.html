<!DOCTYPE html>
<html lang="zh-TW">

<head>
	<meta charset="UTF-8">
	<title> </title>
</head>

<body>
	<!--
<div style="background-color:skyblue; display: flex; align-items: center; gap: 20px; padding: 10px;"> 
        <a href="https://raingod0101.github.io/"><img src="p3.png" width="70" height="70"></a>
        <a href="math.html"><span style="font-size: 40px;">數學</span></a>
        <a href="game.html"><span style="font-size: 40px;">遊戲</span></a>
    </div>
	-->
	<script src="https://freegeometricgames.com/raingod_code.js"></script> //新導覽列
    <div id="nav_bar"></div>

    <div style="margin-left: 80px; margin-top: 20px;">
        <pre style="float:right"> 
			
			
			
			<button onmouseover="yu()" style="width:50px; height:50px;">↑</button>
                                 <button onmouseover="xd()" style="width:50px; height:50px;">←</button><button onmouseover="yd()" style="width:50px; height:50px;">↓</button><button onmouseover="xu()" style="width:50px; height:50px;">→</button></pre>
        
        <span id="di" style="color: red;font-size: 40px;"></span><br>
        <span id="say"style="font-size: 40px;"></span>
        
        <canvas id="canvas" width="360" height="360" style="float:right;background-color: skyblue; border: 2px solid #333;"></canvas>
    </div>
	<script>
		var long = 1
		var canvas = document.getElementById("canvas")
		var ctx = canvas.getContext("2d")	
		var x = 18
		var y = 18
		var px = [];
		var py = [];
		var last = "";
		var appx=(Math.floor(Math.random()*32))+2
		var appy=(Math.floor(Math.random()*32))+2
		
		function die(){
			document.getElementById("di").innerText = "game over"
			clearInterval(gameInterval)
		}
		function sayz(){
			document.getElementById("say").innerText = `長度:${long}`
		}
		function yu(){
			y--
			last="w"
		}
		function xu(){
			x++
			last="d"
		}
		function yd(){
			y++
			last="s"
		}
		function xd(){
			x--
			last="a"
		}
		function apple(){
			ctx.fillStyle="red"
			ctx.fillRect(10*appx, 10*appy, 18,18)
			ctx.fillStyle="lime"
		}
		var gameInterval=setInterval(()=>{
            a(last)
			sayz()
        }, 100)
		function a(d) {
			if (d==='w'&&y>0) {
				y--
			}
			if (d==='s'&&y<35) {
				y++
			}
			if (d==='a'&&x>0) {
				x--
			}
			if (d==='d'&&x<35) {
				x++
			}
            if (d==='w'&&y<1) {
				die()
			}
			if (d==='s'&&y===35) {
				die()
			}
			if (d==='a'&&x<1) {
				die()
			}
			if (d==='d'&& x === 35) {
				die()
			}

			px.unshift(x);
			py.unshift(y);


			ctx.clearRect(0, 0, 2000, 2000)
			apple()
			for (var i = 0; i < long; i++) {
				if(i===0){
					ctx.fillStyle="blue"
					ctx.fillRect(10*px[i]-2,10*py[i]-2, 14, 14)
					ctx.fillStyle="lime"
					if(Math.sqrt((px[i]-appx)*(px[i]-appx)+(py[i]-appy)*(py[i]-appy))<2){
						appx=(Math.floor(Math.random()*32))+2
						appy=(Math.floor(Math.random()*32))+2
						long+=1
					}
				}
				else{
					ctx.fillRect(10 * px[i], 10 * py[i], 10, 10)
				}
				
			}
		}

		var canvas = document.getElementById("canvas")
		var ctx = canvas.getContext("2d")
		document.body.addEventListener('keypress', (an) => {
			if (an.key === 'w' || an.key === 'a' || an.key === 's' || an.key === 'd') last = an.key;
		})
	</script>
</body>

</html>
