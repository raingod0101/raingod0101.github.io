<!DOCTYPE html>
<html>
<head>
    <title>質因數分解</title>
</head>
<body style="background-color:skyblue">
    <a href="https://raingod0101.github.io/"><img src="p3.png" width="50" height="50"></a>
    <a href="https://raingod0101.github.io/math1">更新</a>
    <h1 style="text-align:center;">質因數分解</h1>
    <p></p>
    <input id="raingod" style="text-align:center;"></input>
    <button onclick="rain()" style="text-align:center;"></button>
    <h3 id="abc" style="text-align:center;"></h3>

<script>
// 計算陣列中某個值出現次數
Array.prototype.count = function(x) {
    var cnt = 0;
    for (var i = 0; i < this.length; i++) {
        if (this[i] === x) {
            cnt++;
        }
    }
    return cnt;
};

// 上標字串對照表
var supMap = {0:'⁰',1:'¹',2:'²',3:'³',4:'⁴',5:'⁵',6:'⁶',7:'⁷',8:'⁸',9:'⁹'};

// 將數字轉成上標字串
function toSuperscript(num) {
    var str = '';
    var digits = String(num).split('');
    for (var i = 0; i < digits.length; i++) {
        str += supMap[digits[i]];
    }
    return str;
}

function rain() {
    var n = Number(document.getElementById("raingod").value);

    // 如果輸入不正確，直接顯示提示
    var output = document.getElementById("abc");
    if (n <= 1) {
        output.innerHTML = "請輸入大於 1 的整數";
    } else {

        var num = n;
        var bg = [];
        var i = 2;

        while (i * i <= num) {
            while (num % i === 0) {
                bg.push(i);
                num /= i;
            }
            i++;
        }

        if (num > 1) {
            bg.push(num);
        }

        // 轉成 [質因數, 次數]
        var bgg = [];
        while (bg.length > 0) {
            var y = bg[0];
            var z = bg.count(y);
            bgg.push([y, z]);

            // 刪除 bg 中所有 y
            var newBg = [];
            for (var j = 0; j < bg.length; j++) {
                if (bg[j] !== y) {
                    newBg.push(bg[j]);
                }
            }
            bg = newBg;
        }

        // 產生顯示字串，上標，次方為1就省略
        var result = '';
        for (var k = 0; k < bgg.length; k++) {
            var prime = bgg[k][0];
            var exp = bgg[k][1];
            if (k > 0) {
                result += ' × ';
            }
            if (exp === 1) {
                result += prime;
            } else {
                result += prime + toSuperscript(exp);
            }
        }

        output.innerHTML = n + " 的質因數分解是 " + result;
    }
}
</script>
</body>
</html>














