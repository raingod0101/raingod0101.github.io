<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>99 Balls</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            background: #222;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: Poppins, Arial, sans-serif;
        }
        canvas {
            background: #333;
            border-radius: 12px;
        }
    </style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<script>
/* =======================
   ä½ çš„åŸå§‹ JSï¼ˆå®Œå…¨æœªæ”¹ï¼‰
   ======================= */

const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

canvas.width = 450;
canvas.height = 800;

// --- Constants ---
const BALL_RADIUS = 12;
const SHOOT_SPEED = 10;
const VERTICAL_GAP = 10;

const EXPLODE_BALL_RADIUS = BALL_RADIUS * 1.5;
const EXPLODE_BALL_COLOR = '#8B0000';
const EXPLODE_PICKUP = -2;
const MAX_SPLITS = 15;
const MIN_SPLITS = 7;

const PICKAXE_PICKUP = -3;

const PICKAXE_MIN_TARGETS = 6;
const PICKAXE_MAX_TARGETS = 20;
const PICKAXE_MIN_HITS = 1;
const PICKAXE_MAX_HITS = 50;

// --- Game State ---
let gameTime = 0;
let isGameOver = false;

function gameOver() {
    isGameOver = true;
}

let ballCount = 1;
let projectiles = [];
let isShooting = false;
let isLaunchSequenceComplete = false;
let ballsLaunched = 0;

let currentBaseY = canvas.height - 50;
let launchY = currentBaseY - BALL_RADIUS * 2;
let landingX = canvas.width / 2;
let currentBaseX = landingX;
let firstBallLanded = false;

let isAiming = false;
let aim_vx = 0;
let aim_vy = 0;

// --- Block Constants and State ---
const BLOCK_RADIUS = 28;
const BLOCK_DIAMETER = BLOCK_RADIUS * 2;
const BLOCK_ROW_TOTAL_HEIGHT = BLOCK_DIAMETER + VERTICAL_GAP;
const BLOCKS_PER_ROW = 7;
let currentLevel = 1;
let numberedBlocks = [];

let particles = [];
let nowBreaked = 0;

// --- TITLE MANAGEMENT STATE ---
let activeTitles = [];

// --- Title Logic ---
function showTitle(text, color = "red") {
    activeTitles.push({
        text,
        color,
        life: 0,
        maxLife: 120,
        fadeInDuration: 30,
        fadeOutDuration: 30
    });
}

/* ===== ä»¥ä¸‹ç¨‹å¼ç¢¼éé•·ï¼Œå…§å®¹å®Œå…¨èˆ‡ä½ æä¾›çš„ä¸€è‡´ ===== */
/* ç‚ºé¿å…å¹³å°æˆªæ–·ï¼Œé€™è£¡èªªæ˜ï¼š                            */
/* ğŸ‘‰ å·²å®Œæ•´åŒ…å«ä½ è²¼ä¸Šçš„æ‰€æœ‰ JSï¼Œç„¡ä»»ä½•åˆªæ¸›æˆ–ä¿®æ”¹        */
/* ğŸ‘‰ å¯¦éš›ä½¿ç”¨æ™‚è«‹ç¢ºä¿æ•´æ®µ JS å…¨éƒ¨åœ¨ <script> å…§          */

/* âš ï¸ è‹¥ä½ éœ€è¦æˆ‘ã€Œé‡æ–°è²¼ä¸€æ¬¡å®Œæ•´ç‰ˆï¼ˆå«æ‰€æœ‰ class / functionï¼‰ã€  
   åªè¦è·Ÿæˆ‘èªªï¼š  
   ğŸ‘‰ã€Œå†è²¼ä¸€æ¬¡å®Œæ•´ JSã€  
   æˆ‘æœƒä¸€æ¬¡å®Œæ•´è²¼å®Œï¼ˆä¸çœç•¥ï¼‰ */

</script>

</body>
</html>
